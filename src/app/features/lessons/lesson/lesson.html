<mat-sidenav-container class="lessons-container">
  <mat-sidenav mode="side" opened class="lesson-sidenav">
    <app-lesson-sidenav></app-lesson-sidenav>
  </mat-sidenav>

  <mat-sidenav-content>
    <div class="lessons-container">
      @if(store.currentLesson()) {
      <!-- HAS LESSON-->
      <header class="lesson-header">
        <h1 class="lesson-title">{{ store.currentLesson()!.title }}</h1>
        <p class="lesson-description">
          {{ store.currentLesson()!.description }}
        </p>
        <div class="lesson-completed">
          <label>
            <input
              type="checkbox"
              [checked]="store.currentLesson()!.lesson_completed"
              (change)="toggleLessonCompleted()"
            />
            Lesson Completed
          </label>
        </div>
      </header>

      <section class="objectives">
        <h2>Objectives</h2>
        <ul>
          @for(objective of store.currentLesson()!.objectives; track objective)
          {
          <li>{{ objective }}</li>
          }
        </ul>
      </section>

      <section class="content-sections">
        @for(section of store.currentLesson()!.content; track
        section.section_title) {
        <div class="section-card">
          <h3 class="section-title">{{ section.section_title }}</h3>
          <p class="section-description">{{ section.section_description }}</p>
          <div class="section-completed">
            <label>
              <input
                type="checkbox"
                [checked]="section.section_completed"
                (change)="toggleSectionCompleted(section.section_title)"
              />
              Section Completed
            </label>
          </div>

          <h4>Examples</h4>
          <table class="examples-table">
            <thead>
              <tr>
                <th>Romaji</th>
                <th>Kana</th>
                <th>Kanji</th>
                <th>English</th>
              </tr>
            </thead>
            <tbody>
              @for(example of section.examples; track example.english) {
              <tr>
                <td>{{ example.romaji }}</td>
                <td>{{ example.kana }}</td>
                <td>{{ example.kanji }}</td>
                <td>{{ example.english }}</td>
              </tr>
              }
            </tbody>
          </table>

          @if(section?.info) {
          <div class="info-box">
            <h4>Additional Info</h4>
            <p>{{ section.info?.info_text }}</p>
            <table class="examples-table">
              <thead>
                <tr>
                  <th>Romaji</th>
                  <th>Kana</th>
                  <th>Kanji</th>
                  <th>English</th>
                </tr>
              </thead>
              <tbody>
                @for(example of section.info?.examples; track example.english) {
                <tr>
                  <td>{{ example.romaji }}</td>
                  <td>{{ example.kana }}</td>
                  <td>{{ example.kanji }}</td>
                  <td>{{ example.english }}</td>
                </tr>
                }
              </tbody>
            </table>
          </div>
          }
        </div>
        }
      </section>

      } @else {

      <h1>Japanese Language Lessons</h1>

      <div class="welcome-section">
        <p class="intro">
          Welcome to your Japanese learning journey! Here you'll find structured
          lessons to help you master the Japanese language.
        </p>

        <div class="features">
          <div class="feature-item">
            <h3>üìö Structured Learning</h3>
            <p>Progress through carefully designed lessons</p>
          </div>

          <div class="feature-item">
            <h3>‚úçÔ∏è Practice Writing</h3>
            <p>Learn proper stroke order and writing techniques</p>
          </div>

          <div class="feature-item">
            <h3>üó£ Pronunciation Guide</h3>
            <p>Master the sounds of Japanese</p>
          </div>
        </div>
      </div>

      <div class="get-started">
        <h2>Ready to begin?</h2>
        <p>Select a lesson from the sidebar to start learning!</p>
      </div>
      }
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>
